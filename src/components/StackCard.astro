---
export interface Props {
  title: string
  summary?: string
  href: string
  collection: string
  date?: Date | string
  tags?: string[]
}

const { title, summary, href, collection, date, tags } = Astro.props

const typeLabel = collection === "canon_notes"
  ? "Canon Note"
  : collection === "compass_points"
  ? "Compass Point"
  : collection === "pillars"
  ? "Pillar"
  : "Foundation"

const formattedDate = date
  ? (typeof date === "string"
      ? new Date(date).toLocaleDateString(undefined, { year: "numeric", month: "short", day: "numeric" })
      : date.toLocaleDateString(undefined, { year: "numeric", month: "short", day: "numeric" }))
  : null
---
<a href={href} class="block rounded-xl border p-4 shadow hover:shadow-lg transition">
  <div class="text-xs font-semibold uppercase tracking-wide text-indigo-600 dark:text-indigo-400 mb-1">
    {typeLabel}
  </div>
  <div class="font-bold text-lg mb-1">{title}</div>
  {summary && <div class="text-sm text-zinc-600 dark:text-zinc-400 mb-2">{summary}</div>}
  {formattedDate && (
    <div class="text-xs text-zinc-500 dark:text-zinc-400 mb-1">{formattedDate}</div>
  )}
  {tags && tags.length > 0 && (
    <div class="flex flex-wrap gap-2 mt-1">
      {tags.map(tag => (
        <span class="px-2 py-0.5 rounded bg-zinc-100 dark:bg-zinc-800 text-xs text-zinc-700 dark:text-zinc-300">{tag}</span>
      ))}
    </div>
  )}
</a>